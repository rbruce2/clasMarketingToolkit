<p class="modTitle">Reports - iSearch Profile Audit</p>
<!-- <span class="floatRightTop blueBtn"><a href="#!/reports">More Reports</a></span> -->

<!-- Report Request Form -->
<div class="md-padding fade" flex layout-sm="column" ng-if="!vm.ranReport">
    <md-card class="fullHeight">
        <md-card-content>
            <br>
            <h2 class="text-center">Which school/department would you like to audit?</h2><br>

            <div layout="row" flex="50" class="centerRow">
                <md-select id="depList" ng-model="vm.department" placeholder="School/Department" class="centerRow">
                  <md-option value="1409"><strong>College of Liberal Arts & Sciences</strong></md-option>
                  <md-option value="0" flex-offset="5">Aerospace Studies</md-option>
                  <md-option value="1" flex-offset="5">American Indian Policy Institute</md-option>
                  <md-option value="2" flex-offset="5">American Indian Studies</md-option>
                  <md-option value="3" flex-offset="5">Az Ctr Medieval/Renais Studies</md-option>
                  <md-option value="4" flex-offset="5">Center For Asian Research</md-option>
                  <md-option value="5" flex-offset="5">Center for Bioenergy & Photosynthesis</md-option>
                  <md-option value="6" flex-offset="5">Center for Evolution & Medicine</md-option>
                  <md-option value="7" flex-offset="5">Center For Film Media Research</md-option>
                  <md-option value="8" flex-offset="5">Center for Meteorite Studies</md-option>
                  <md-option value="9" flex-offset="5">CLAS Advancement</md-option>
                  <md-option value="10" flex-offset="5">CLAS IDT</md-option>
                  <md-option value="11" flex-offset="5">CLAS Journals</md-option>
                  <md-option value="12" flex-offset="5">CLAS MLS Program</md-option>
                  <md-option value="13" flex-offset="5">CLAS Office of Student & Acad</md-option>
                  <md-option value="14" flex-offset="5">CLAS Res & Facil</md-option>
                  <md-option value="15" flex-offset="5">CLAS Research Technical Serv</md-option>
                  <md-option value="16" flex-offset="5">Department of Physics</md-option>
                  <md-option value="17" flex-offset="5">English</md-option>
                  <md-option value="18" flex-offset="5">Gerontology</md-option>
                  <md-option value="19" flex-offset="5">Hispanic Research Center</md-option>
                  <md-option value="20" flex-offset="5">Hugh Downs School Of Human Communication</md-option>
                  <md-option value="21" flex-offset="5">Inst For Social Science Rsch</md-option>
                  <md-option value="22" flex-offset="5">Institute Humanities Research</md-option>
                  <md-option value="23" flex-offset="5">Institute of Human Origins</md-option>
                  <md-option value="24" flex-offset="5">Jewish Studies</md-option>
                  <md-option value="25" flex-offset="5">Kinesiology Peb East</md-option>
                  <md-option value="26" flex-offset="5">Kinesiology Peb West</md-option>
                  <md-option value="27" flex-offset="5">LeRoy Eyring CSSS</md-option>
                  <md-option value="28" flex-offset="5">Lincoln Center Applied Ethics</md-option>
                  <md-option value="29" flex-offset="5">Mathematics</md-option>
                  <md-option value="30" flex-offset="5">MCMSC</md-option>
                  <md-option value="31" flex-offset="5">Melikian Center</md-option>
                  <md-option value="32" flex-offset="5">Military Science</md-option>
                  <md-option value="33" flex-offset="5">NACTS</md-option>
                  <md-option value="34" flex-offset="5">Naval Science</md-option>
                  <md-option value="35" flex-offset="5">Office Of Climatology</md-option>
                  <md-option value="36" flex-offset="5">Origins</md-option>
                  <md-option value="37" flex-offset="5">Piper Center</md-option>
                  <md-option value="38" flex-offset="5">Prgm Soc Dynamics & Complexity</md-option>
                  <md-option value="39" flex-offset="5">PRIME Center</md-option>
                  <md-option value="40" flex-offset="5">Program Metabolic Biology</md-option>
                  <md-option value="41" flex-offset="5">Project Humanities</md-option>
                  <md-option value="42" flex-offset="5">Psychology</md-option>
                  <md-option value="43" flex-offset="5">School of Civic and Economic Thought and Leadership</md-option>
                  <md-option value="44" flex-offset="5">School Of Earth and Space Exploration</md-option>
                  <md-option value="45" flex-offset="5">School of Geog Sci & Urban Pln</md-option>
                  <md-option value="46" flex-offset="5">School of Human Evolution and Social Change</md-option>
                  <md-option value="47" flex-offset="5">School of Life Sciences</md-option>
                  <md-option value="48" flex-offset="5">School of Molecular Sciences</md-option>
                  <md-option value="49" flex-offset="5">School of Politics & Global St</md-option>
                  <md-option value="50" flex-offset="5">School of Social Transformation</md-option>
                  <md-option value="51" flex-offset="5">School of Transborder Studies</md-option>
                  <md-option value="52" flex-offset="5">SHPRS</md-option>
                  <md-option value="53" flex-offset="5">SILC</md-option>
                  <md-option value="54" flex-offset="5">Study Of Religion & Conflict</md-option>
                  <md-option value="55" flex-offset="5">The Beyond Center</md-option>
                  <md-option value="56" flex-offset="5">The Sanford School</md-option>
                </md-select>
            </div>

            <div class="text-center" style="padding-top:25px;padding-bottom:55px;">
              <span class="blueBtn"><a href="#!/reports/isearchaudit" ng-click="vm.startProfileAudit()">Run</a></span>
            </div>
            <!-- <hr style="width:86%;color:whitesmoke;"> -->
            <div class="isearchAuditInstructions">
              <i class="fa fa-info-circle fa-2x"></i>
              <h3>iSearch Audit Guidelines</h3>
              <p>The iSearch Profile Audit scans all iSearch profiles within a department for compliance with <a href="https://brandguide.asu.edu/web-standards/isearch-profiles" target="_blank">ASU iSearch brand standards.</a> Each profile is assigned a score, between 0 and 100.</p>
              <p>This tool is designed for directory administrators, communicators and managers to get a snapshot of their iSearch department's health and identify areas of improvement for each profile.</p>
              <p>Along with a percentage for each profile, the tool will display error messages for each profile highlighting the deficiency.</p>
              <p>Faculty, staff, students and student workers have different expectations for profile completeness.</p>
            <br>
            <div layout="row" style="width:80%;margin:0 auto;">
              <div flex class="infoList">
                <p class="center">
                <strong>The program currently tests for:</strong>
                  <ul>
                    <li>Biography and short biography</li>
                    <li>Contact information</li>
                    <li>Titles</li>
                    <li>Expertise areas</li>
                    <li>Education and CV</li>
                  </ul>
                </p>
              </div>
              <div flex class="infoList">
                <p class="center">
                  <strong>The following scoring is used:</strong>
                  <ul>
                    <li>100: Dark green; profile is complete</li>
                    <li>90-99: Green; profile is almost entirely complete</li>
                    <li>75-89: Yellow, profile is missing 1 or more key areas</li>
                    <li>0-74: Red, profile is missing multiple key areas</li>
                  </ul>
                </p>
              </div>
            </div>
          </div>
        </md-card-content>
    </md-card>
</div>
<!-- END: Report Request Form -->

<!-- Report Results -->
<div class="md-padding" flex layout-sm="column">
    <md-card class="">
        <!-- loader -->
        <!-- <md-progress-linear md-mode="indeterminate" ng-if="vm.loading"></md-progress-linear> -->
        <md-card-content id="loading" ng-if="vm.loading" class="text-center">
          <!-- loading...{{load_notes}} -->
          <h2 class="text-center" style="margin-bottom:0px;">Generating iSearch Audit Report</h2><br>
          <img src="/app/assets/images/searchReportnodither.gif" alt="" style="width:400px;">
          <p style="padding-bottom:25px;font-weight:bold;">This may take a few minutes to load. Please be patient and <u>do not reload this page.</u></p>
        </md-card-content>

        <!-- isearch Report -->
        <md-card-content class="fade" ng-if="!vm.loading && vm.reportDone">
            <br>
            <h2 class="text-center reportTitle">{{vm.currentReportTitle}}</h2>
            <p class="text-center reportSubtitle">iSearch Profile Audit Report</p>
            <span class="floatRightTop blueBtn ng-scope">
              <a href="" ng-click="vm.backToiSearchAuditList()">Back</a>
            </span>
            <br>
            <div class="reportResults" layout="row">

              <div flex="70" class="" id="reportResults">
                <div class="userResult" ng-repeat="user in vm.isearch_results | filter: vm.lessThan('audit_score', vm.scoreFilter) | filter: { displayName: vm.searchInput } track by $index" ng-click="vm.togglePageslide(user.idxIdentifier)" >
                  <img ng-src="{{user.photoUrl}}" fallback-src="/app/assets/images/imgFallback.png" alt="">
                  <p>
                    <strong>{{user.displayName}}</strong>
                    <span class="resultPriDep">{{user.primaryDepartment}}
                      <span ng-class="{'complete' : user.audit_score == 100, 'good' : user.audit_score < 100 && user.audit_score > 89, 'fair' : user.audit_score <= 89 && user.audit_score >= 75, 'bad' : user.audit_score < 75}">{{user.audit_score | number:0}}%</span>
                    </span>
                  </p>
                </div>
              </div>


              <div flex="30" layout="column" style="padding-left:28px;margin-top:-7px;">
                <md-subheader style="background-color:#ffffff;">
                <div class="overallResults">
                  <p class="overallTitle">Overall Score
                    <span class="detailsIcon">
                      <md-tooltip md-direction="left" ng-if="vm.showOverallDetails === false">Show details</md-tooltip>
                      <md-tooltip md-direction="left" ng-if="vm.showOverallDetails === true">Overall Score</md-tooltip>
                      <i class="fa fa-info-circle" ng-click="vm.showOverallDetails = !vm.showOverallDetails"></i>
                    </span>
                  </p>
                  <p style="color:#ffffff;padding-bottom:14px;padding-top:14px;" ng-if="vm.showOverallDetails === false"><ng-gauge size="200" type="full" thick="7" used="vm.overall_total | number:0" total="100" cap="round"  foreground-color="#ffffff" background-color="rgba(255,255,255, 0.4)" append="%"></ng-gauge></p>
                  <div style="color:#ffffff;padding:14px;overflow:auto;" class="container" ng-if="vm.showOverallDetails ===  true">
                    <div class="row" style="padding-top:20px;">
                      <div class="colGauge">
                        <ng-gauge size="120" type="semi" label="Photo" thick="4" used="vm.overall_total_photo | number:0" total="100" cap="round"  foreground-color="#ffffff" background-color="rgba(255,255,255, 0.4)" append="%"></ng-gauge>
                      </div>
                      <div class="colGauge">
                        <ng-gauge size="120" type="semi" label="Phone Number" thick="4" used="vm.overall_total_phone | number:0" total="100" cap="round"  foreground-color="#ffffff" background-color="rgba(255,255,255, 0.4)" append="%"></ng-gauge>
                      </div>
                    </div>
                    <div class="row" style="padding-top:20px;">
                      <div class="colGauge">
                        <ng-gauge size="120" type="semi" label="Email" thick="4" used="vm.overall_total_email | number:0" total="100" cap="round"  foreground-color="#ffffff" background-color="rgba(255,255,255, 0.4)" append="%"></ng-gauge>
                      </div>
                      <div class="colGauge">
                        <ng-gauge size="120" type="semi" label="Primary Department" thick="4" used="vm.overall_total_primDep | number:0" total="100" cap="round"  foreground-color="#ffffff" background-color="rgba(255,255,255, 0.4)" append="%"></ng-gauge>
                      </div>
                    </div>
                    <div class="row" style="padding-top:20px;">
                      <div class="colGauge">
                        <ng-gauge size="120" type="semi" label="Biography" thick="4" used="vm.overall_total_bio | number:0" total="100" cap="round"  foreground-color="#ffffff" background-color="rgba(255,255,255, 0.4)" append="%"></ng-gauge>
                      </div>
                      <div class="colGauge">
                        <ng-gauge size="120" type="semi" label="Short Bio" thick="4" used="vm.overall_total_shortBio | number:0" total="100" cap="round"  foreground-color="#ffffff" background-color="rgba(255,255,255, 0.4)" append="%"></ng-gauge>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="overallWarnings">
                  <div class="reworkDirectory" ng-if="vm.reworkDirectory >= 10">
                    <i class="fa fa-warning"></i>
                    <span style="line-height:16px;">There are <strong>{{vm.reworkDirectory}}</strong> profiles with duplicate titles for this department. This suggests that the directory structure is not in compliance with ASU branding standards.</span>
                    <p class="reviewStandardsBtn">
                      <md-button ng-click="vm.showDirectoryPresentation($event)">
                      Review Standards
                    </md-button>
                  </p>
                  </div>
                </div>
                <div class="filters">
                  <md-input-container>
                    <input mdInput placeholder="Quick find" ng-model="vm.searchInput">
                    <md-icon><i class="fa fa-search"></i></md-icon>
                  </md-input-container>
                  <br>
                  <p><strong>Filter by score:</strong></p>
                  <p>
                    <md-slider flex class="md-primary" md-discrete ng-model="vm.scoreFilter" step="1" min="0" max="100" aria-label="overall score"></md-slider>
                    <br>
                    <div ng-click="vm.scoreFilter = 75" class="text-center filterBtn" >Completeness less than 75%</div>
                    <br>
                    <div ng-click="vm.scoreFilter = 60" class="text-center filterBtn">Completeness less than 60%</div>
                    <br>
                    <div ng-click="vm.scoreFilter = 50" class="text-center filterBtn">Completeness less than 50%</div>
                    <br>
                    <div ng-click="vm.scoreFilter = 100" class="text-center filterBtn">Show All</div>
                    <br>
                    <md-menu>
                      <md-button class="md-primary floatRight" ng-click="$mdMenu.open($event)">Report Options</md-button>
                      <md-menu-content width="2">
                        <md-menu-item>
                          <md-button ng-click="vm.printDiv(reportResults)">
                            <i class="fa fa-print"></i>
                             Print
                          </md-button>
                        </md-menu-item>
                        <md-menu-item>
                          <md-button ng-csv="vm.isearch_results | filter: vm.lessThan('audit_score', vm.scoreFilter) | filter: { displayName: vm.searchInput } " csv-header="['Name', 'Email', 'Primary Title', 'Audit Score', 'iSearch Profile']" csv-column-order="['displayName', 'emailAddress', 'primaryTitle', 'audit_score', 'isearchProfileUrl']" filename="iSearchAuditReport.csv">
                            <i class="fa fa-file-excel-o"></i>
                             Export to CSV/Excel
                          </md-button>
                        </md-menu-item>
                      </md-menu-content>
                    </md-menu>

                  </p>
                </div>
                </md-subheader>

              </div>

            </div>

        </md-card-content>
    </md-card>
</div>
<!-- END: Report Results -->

<!-- pageslide template -->
<div class="someClass" ng-if="vm.checked" ng-click="vm.togglePageslide()" style="position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.59);z-index:60;">
</div>
<div pageslide ps-open="vm.checked" ps-size="33%">
    <div style="padding:20px" id="demo-right">
      <div class="detailsHeaderInfo">
        <img id="picture" ng-src="{{vm.UserSlider.photoUrl}}" fallback-src="/app/assets/images/imgFallback.png" alt="">
        <div class="dhiLeft">
          <h2><strong>{{vm.UserSlider.displayName}}</strong></h2>
          <p>{{vm.UserSlider.primaryDepartment}}</p>
        </div>
        <div class="dhiRight">
          <a href="" ng-click="vm.togglePageslide()" ><i class="fa fa-close"></i></a>
          <p class="detailsOverallScore" ng-class="{'complete' : vm.UserSlider.audit_score == 100, 'good' : vm.UserSlider.audit_score < 100 && vm.UserSlider.audit_score > 89, 'fair' : vm.UserSlider.audit_score <= 89 && vm.UserSlider.audit_score >= 75, 'bad' : vm.UserSlider.audit_score < 75}">{{vm.UserSlider.audit_score | number:0 }}%</p>
        </div>
      </div>
      <div class="detailsOverview">
        <div class="doLeft">
          <h4>Titles:</h4>
          <ul>
            <li ng-repeat="title in vm.UserSlider.titles track by $index">{{title}}</li>
          </ul>
          <div ng-if="vm.UserSlider.primaryEmplClass === 'Faculty' || vm.UserSlider.primaryEmplClass === 'Faculty w/Admin Appointment' || vm.UserSlider.primaryEmplClass === 'Academic Professional' || vm.UserSlider.primaryEmplClass === 'Academic Prof w/Admin Appt'">
            <h4>Expertise Areas:</h4>
            <ul>
              <li ng-repeat="area in vm.UserSlider.expertiseAreas track by $index">{{area}}</li>
            </ul>
          </div>
        </div>
        <div class="doRight">

        </div>
      </div>
      <div class="tabContent" flex>
        <md-tabs md-border-bottom class="asuPalette">
          <md-tab label="Needs Attention" ng-if="vm.UserSlider.audit_score !== 100">
            <md-content class="md-padding" style="background-color:#ffffff;">
              <ang-accordion close-icon-class="fa fa-warning" open-icon-class="fa fa-warning" >
                  <collapsible-item item-title="Missing telephone number" ng-if="vm.UserSlider.audit_phone">
                      <div>Add a phone number. Complete through My ASU.</div>
                  </collapsible-item>
                  <collapsible-item item-title="Missing profile photo" ng-if="vm.UserSlider.audit_photoUrl">
                      <div>Add a professional profile photo. The photo should be between 150 pixels by 150 pixels and not larger than 800 pixels by 800 pixels.</div>
                  </collapsible-item>
                  <collapsible-item item-title="Missing email" ng-if="vm.UserSlider.audit_email">
                      <div>Add ASU email. Complete through My ASU.</div>
                  </collapsible-item>
                  <collapsible-item item-title="Missing job title" ng-if="vm.UserSlider.audit_affiliationTitle">
                      <div>Add a job title. Please contact your Directory Administrator(s).</div>
                  </collapsible-item>
                  <collapsible-item item-title="Missing unit affiliation" ng-if="vm.UserSlider.audit_unitName">
                      <div>All faculty, staff and graduate students have a unit affiliation. Contact your Directory Administrator(s) to add an affiliation. Secondary affiliations, such as sustainability scientist and adjunct positions, should be written in your bio text.</div>
                  </collapsible-item>
                  <collapsible-item item-title="Missing expertise areas" ng-if="vm.UserSlider.audit_expertiseAreas">
                      <div>Faculty members are expected to have two or more expertise areas.</div>
                  </collapsible-item>
                  <collapsible-item item-title="Insufficient expertise areas listed" ng-if="vm.UserSlider.audit_expertiseAreas_length">
                      <div>Faculty members are expected to have two or more expertise areas. If you can’t find what matches your area, please send an email to your Directory Administrator(s).</div>
                  </collapsible-item>
                  <collapsible-item item-title="Missing employee category" ng-if="vm.UserSlider.audit_emplCat">
                      <div>All employees are categorized as faculty, staff, student or student worker. Please contact your Directory Administrator(s).</div>
                  </collapsible-item>
                  <collapsible-item item-title="Missing primary campus location" ng-if="vm.UserSlider.audit_campus">
                      <div>Add a primary campus location. Please contact your Directory Administrator(s).</div>
                  </collapsible-item>
                  <collapsible-item item-title="Missing mail code" ng-if="vm.UserSlider.audit_mailCode">
                      <div>Add a mail code. Please contact your Directory Administrator(s).</div>
                  </collapsible-item>
                  <collapsible-item item-title="Missing biography" ng-if="vm.UserSlider.audit_bio">
                      <div>Write a biography. Biographies should be 100-300 words and written in the third person. Do not list education or write in primary affiliations.</div>
                  </collapsible-item>
                  <collapsible-item item-title="Biography is too short" ng-if="vm.UserSlider.audit_bio_min">
                      <div>Biographies should be 100-300 words and written in the third person. Do not list education or write in primary affiliations.</div>
                  </collapsible-item>
                  <collapsible-item item-title="Biography exceeds word limit" ng-if="vm.UserSlider.audit_bio_max">
                      <div>Biographies should be 100-300 words and written in the third person. Do not list education or write in primary affiliations.</div>
                  </collapsible-item>
                  <collapsible-item item-title="Biography not written in third person" ng-if="vm.UserSlider.audit_bio_1stPerson_warning">
                      <div>Biographies should be 100-300 words and written in the third person. Do not list education or write in primary affiliations.</div>
                  </collapsible-item>
                  <collapsible-item item-title="Missing short biography" ng-if="vm.UserSlider.audit_shortBio">
                      <div>Short biographies are used on the search page. They should be less than 40 words and written in the third person. Use last name only in this text, if used.</div>
                  </collapsible-item>
                  <collapsible-item item-title="Short biography exceeds word limit" ng-if="vm.UserSlider.audit_shortBio_max">
                      <div>Short biographies should be less than 40 words.</div>
                  </collapsible-item>
                  <collapsible-item item-title="Short biography includes first name" ng-if="vm.UserSlider.audit_shortBio_firstName">
                      <div>The short biography can only include the last name, if used. Must be written in the third person.</div>
                  </collapsible-item>
                  <collapsible-item item-title="Short biography not written in third person" ng-if="vm.UserSlider.audit_shortBio_1stPerson_warning">
                      <div>Short biographies should be less than 40 words and written in the third person. Use last name only in this text, if used.</div>
                  </collapsible-item>
                  <collapsible-item item-title="Duplicate titles in same department" ng-if="vm.UserSlider.audit_dupTitles">
                      <div>Titles in each department must be unique. Please contact your Directory Administrator(s).</div>
                  </collapsible-item>
                  <collapsible-item item-title="Missing job title" ng-if="vm.UserSlider.audit_titles">
                      <div>All employees are required to have a working title.</div>
                  </collapsible-item>
                  <collapsible-item item-title="Job title is blank" ng-if="vm.UserSlider.audit_titleBlank">
                      <div>Titles can not be blank.</div>
                  </collapsible-item>
                  <collapsible-item item-title="Missing education" ng-if="vm.UserSlider.audit_education">
                      <div>All Faculty are required to list their education.</div>
                  </collapsible-item>
                  <collapsible-item item-title="Missing CV" ng-if="vm.UserSlider.audit_cv">
                      <div>All Faculty are required to upload a copy of their CV.</div>
                  </collapsible-item>
              </ang-accordion>
            </md-content>
          </md-tab>
          <md-tab label="Bio" ng-if="vm.UserSlider.bio">
            <md-content class="md-padding" style="background-color:#ffffff;">
              <div class="" ng-bind-html="vm.UserSlider.bio">
              </div>
            </md-content>
          </md-tab>
          <md-tab label="Short Bio" ng-if="vm.UserSlider.shortBio">
            <md-content class="md-padding" style="background-color:#ffffff;">
              <div class="" ng-bind-html="vm.UserSlider.shortBio">
              </div>
            </md-content>
          </md-tab>
          <md-tab label="Research" ng-if="vm.UserSlider.publications">
            <md-content class="md-padding" style="background-color:#ffffff;">
              <div class="" ng-bind-html="vm.UserSlider.publications">
              </div>
            </md-content>
          </md-tab>
          <md-tab label="Teaching" ng-if="vm.UserSlider.courses">
            <md-content class="md-padding" style="background-color:#ffffff;">
              <div class="" ng-bind-html="vm.UserSlider.courses">
              </div>
            </md-content>
          </md-tab>
          <md-tab label="Public Work" ng-if="vm.UserSlider.pub_work">
            <md-content class="md-padding" style="background-color:#ffffff;">
              <div class="" ng-bind-html="vm.UserSlider.pub_work">
              </div>
            </md-content>
          </md-tab>
        </md-tabs>
      </div>
      <div class="slideoutFooter">
        <section layout="row" layout-sm="column" layout-align="center center" layout-wrap>
          <md-button class="md-raised" ng-click="vm.togglePageslide()">Close</md-button>
          <md-button class="md-raised md-primary" style="color:#ffffff;" ng-href="{{vm.UserSlider.eid}}" target="_blank"><i class="fa fa-user"></i> iSearch Profile</md-button>
          <!-- <md-button class="md-raised md-primary" style="color:#ffffff;" onclick="checkImgForFace()"><i class="fa fa-user"></i> Check image</md-button> -->
        </section>
      </div>
    </div>
</div>
